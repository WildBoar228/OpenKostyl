# OpenKostyl
Проект создан командой White Wings для упрощения и ускорения калибровки цветовых диапазонов на камерах OpenMV. Программа запускается на компьютере, обмениваясь информацией с камерой.

За основу были взяты следующие материалы, предоставленные OpenMV:
* https://github.com/openmv/openmv/blob/master/scripts/examples/08-RPC-Library/34-Remote-Control/image_transfer_jpg_as_the_remote_device_for_your_computer.py
* https://www.youtube.com/watch?v=x0u_ntilVyA

В случае возникновения технических неполадок пишите: @wildboar228 (Telegram)

## Начало использования
В файле requirements.txt перечислены зависимости проекта, которые можно установить на интерпретатор Python или в виртуальное окружение, введя в терминале `pip install -r requirements.txt`.

В папке cam_example находятся файлы для камеры:
* `connect_to_kostyli.py` - модуль, который содержит функционал для передачи данных в OpenKostyl. Поместите его в файловую систему камеры.
* `thresholds.txt` - текстовый файл с сохранёнными цветами. Поместите его в файловую систему камеры.
* `blobs.py` - файл, который нужно сохранить на камере как main.py с помощью OpenMV IDE. Если питание поступает на камеру через USB (т.е. камера подключена к компьютеру), скрипт обменивается информацией с OpenKostyl. Иначе (если питание идёт через другие каналы) скрипт читает цвета, перечисленные в файле `thresholds.txt`, и выполняет свою основную работу. Чтобы можно было отлаживать второй вариант при подключении к OpenMV IDE, закомментируйте строку кода `connect_to_kostyli.connect_to_comp()`, иначе вы получите ошибку (`OSError: cannot use USB_VCP while IDE is connected`).

Чтобы начать калибровку камеры, подключите её через USB-порт и запустите скрипт OpenKostyl.py.

**Обратите внимание**: подключение к камере, уже подключенной к OpenMV IDE, невозможно. Отключитесь от камеры в OpenMV IDE, чтобы OpenKostyl мог работать.

OpenKostyl пытается автоматически выбрать COM-порт для соединения с камерой OpenMV. Если у него не получилось, введите название порта сами (например, COM11).
